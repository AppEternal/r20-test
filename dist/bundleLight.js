!function(){"use strict";window._TOGGLELIGHT||(window._TOGGLELIGHT={isEnabled:!1,lightSaved:!1,lightLegacy:null,lightEnabled:null,lightOnDrop:null}),window._TOGGLELIGHT.enable=()=>{if(console.log("window._TOGGLELIGHT",window._TOGGLELIGHT),window._TOGGLELIGHT.lightSaved){try{Campaign.pages.models[Campaign.activePageIndex].d20.dyn_fog.enabled=window._TOGGLELIGHT.lightLegacy}catch(i){}try{window.Campaign.engine.engineStore._p.state._value.vttTools_pageSettings.dynamicLightingEnabled=window._TOGGLELIGHT.lightEnabled}catch(i){}}},window._TOGGLELIGHT.disable=()=>{if(console.log("window._TOGGLELIGHT",window._TOGGLELIGHT),!window._TOGGLELIGHT.lightSaved){window._TOGGLELIGHT.lightSaved=!0;try{window._TOGGLELIGHT.lightEnabled=window.Campaign.engine.engineStore._p.state._value.vttTools_pageSettings.dynamicLightingEnabled}catch(i){}try{window._TOGGLELIGHT.lightLegacy=Campaign.pages.models[Campaign.activePageIndex].d20.dyn_fog.enabled}catch(i){}}try{window.Campaign.engine.engineStore._p.state._rawValue.vttTools_pageSettings.dynamicLightingEnabled=!1}catch(i){}try{Campaign.pages.models[Campaign.activePageIndex].d20.dyn_fog.enabled=!1}catch(i){}},window._TOGGLELIGHT.initialize=()=>{$(".r20-draggable-element").remove();let i=$("body").append('<div\r\n\tclass="ui-dialog ui-widget ui-widget-content r20-draggable-element ui-corner-all initiativedialog ui-draggable ui-resizable ui-dialog-buttons"\r\n\tstyle="position: fixed !important; top: 50%; left: 50%; z-index: 20000 !important"\r\n>\r\n\t<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix ui-draggable-handle">\r\n\t\t<span id="ui-id-10" class="ui-dialog-title">Toggle Lighting</span>\r\n\t\t<a href="#" class="ui-dialog-titlebar-close ui-corner-all r20-deleteSelf" role="button">\r\n\t\t\t<span class="ui-icon ui-icon-closethick">close</span>\r\n\t\t</a>\r\n\t</div>\r\n\t<p style="max-height: 500px; overflow: auto"><span id="displayRolls"></span></p>\r\n\t<li style="display: flex; align-items: center; justify-content: space-between; padding: 4px 0">\r\n\t\t<button class="btn btn-danger" id="toggle-light" type="button">Disabled</button>\r\n\t</li>\r\n</div>\r\n'),e=$(i);e.find("#toggle-light").text(window._TOGGLELIGHT.isEnabled?"Enabled":"Disabled"),e.find("#toggle-light").off("click").on("click",(function(){window._TOGGLELIGHT.isEnabled=!window._TOGGLELIGHT.isEnabled,window._TOGGLELIGHT.isEnabled?window._TOGGLELIGHT.disable():window._TOGGLELIGHT.enable(),$(this).text(window._TOGGLELIGHT.isEnabled?"Enabled":"Disabled")})),e.find(".r20-draggable-element").draggable({containment:"window",handle:!1,scroll:!1}),e.find(".r20-deleteSelf").on("click",(function(){window._TOGGLELIGHT.enable(),$(this).closest(".r20-draggable-element").remove()}))},window._TOGGLELIGHT.initialize()}();
